<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>变量的生命周期</title>
</head>
<body>
    <script>
        /*
        * 什么是变量的生命周期？
        * 就变量从定义开始，到消亡结束，中间存活的整个周期，就叫变量的生命周期。
        * */

        /*
        * 全局变量的生命周期：
        * 从定义开始，到页面被卸载后结束，整个存活的周期，就是全局变量的生命周期；
        * 可见全局变量的生命周期是非常长的，只要定义了，就能够和页面一起长存。
        * 不是同年同月同日生，但求同年同月同日死。
        * */

        /*
        * 局部变量的生命周期：
        * 从定义开始，到函数执行完毕后结束，整个存活的周期，就是局部变量的生命周期。
        * 补充：实际上，局部变量的生命周期还需要看，有没有其他被变量引用的函数，
        * 该函数的函数体中引用了这个局部变量，如果引用了，
        * 那么这个局部变量的生命周期就会和这个引用他的函数的生命周期一样了。
        * */

        // 例子1
        function fn() {
            var a = 1;   // 当这个函数执行完毕后，这个a变量就会被释放掉，它的生命周期也就结束了。
        }

        // 例子2
        function f() {
            var a = 3;   // 当这个函数执行完毕后，这个a变量就会被释放掉，它的生命周期也就结束了。
            var b = 2;  // 当这个函数执行完毕后，这个b变量不会被释放掉，它的生命周期就看return的函数了。
            return function () {
                console.log(b);
            };
        }
        var inF = f();

        // 例子3
        (function () {
            // 当自调函数调用结束后，这个f函数被释放掉了，它的生命周期也就结束了。
            function f() {
                var a = 3;   // 当这个函数执行完毕后，这个a变量就会被释放掉，它的生命周期也就结束了。
                var b = 2;  // 当这个函数执行完毕后，这个b变量不会被释放掉，它的生命周期就看return的函数了。
                return function () {
                    console.log(b);
                };
            }

            // 当自调函数调用结束后，这个inF变量被释放掉了，它的生命周期也就结束了。
            // 也就意味着，inF所指向的那个函数的生命周期也要结束了，
            // 同时因为这个函数的生命周期要结束了，
            // 所以f函数调用时定义的局部变量b的生命周期也要结束了。
            var inF = f();
        }());
    </script>
</body>
</html>